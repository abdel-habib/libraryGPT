<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LibraryGPT</title>
    
    <!-- stylesheets -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/bootstrap-grid.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/bootstrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">

    <!-- scripts -->
    <script src="{{ url_for('static', filename='scripts/index.js') }}" defer></script>

    <!-- icons -->
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=upload_file" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=send" /> -->
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=docs" /> -->

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=open_in_full" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=send" />


</head>
<body>
    {% include 'partials/header.html' %}

    <div class="workspace container-fluid"> <!-- container-fluid -->
        <div class="row">
            <!-- <div class="col-2 panel-section">
                <div class="row header">
                    <span>Histoy</span>
                </div>
                <div class="row item">
                    <a href="">Chat History</a>
                </div>
                <div class="row item">
                    <a href="">Chat</a>
                </div>
                <div class="row item">
                    <a href="">Notes</a>
                </div>
                <div class="row settings">
                    <span>
                        <a href="/logout">Logout</a>
                    </span>
                </div>
            </div> -->

            <div class="col-lg-9 col-sm-12 directory-container" id="directory-container">
                <div class="row document-search-wrapper">
                    <input class="document-search-input" type="text" name="documents-search" placeholder="Text to search for text in all documents ..."
                    id="documents-search">
                    <span class="top-k-wrapper">
                        <span>Top-k:</span>
                        <input class="top-k-input" type="text" name="top-k" id="top-k-input" value="5" placeholder="Top-k Value">
                    </span>
                    <div class="search-results card-slider d-none" id="search-results">
                        
                    </div>
                </div>
                <div class="row folders-wrapper">
                    <div class="folders-header">
                        <div class="dropdown">
                            <!-- check if the json file has items using jinja templates -->
                            {% if workspace_json %}
                                <select id="directory-menu">
                                    <option value="" disabled selected>Choose your working directory</option>
                                    {% for item in workspace_json %}
                                        <option value="{{ item.path }}">"{{ item.path }}"</option>
                                    {% endfor %}
                                </select>
                            {% else %}
                                <span>This projects runs directory on your local folders and no data is stored externaly, thus it is important 
                                    to add your list of directories that you wish to work on in the `workspace_json.json` file.</span>
                                </span>
                            {% endif %}
                        </div>
                        <!-- <span id="selected-directory-path">Please select a folder to search through.</span> -->
                        <span>
                            <!-- <label for="directoryInput" class="directory-selector-label">Select Folder Directory</label>
                            <input class="directory-selector" type="file" id="directoryInput"  webkitdirectory directory>
                            <button id="fetchPDFs" class="d-none"></button> -->
                            <button id="generate-embeddings">
                                <span>Process</span>
                            </button>
                        </span>
                    </div>
                    <div class="folders-grid card-slider d-none" id="folders-grid">
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-sm-12 chat-container" id="chat-container">
                <div class="chat-header">
                    <button onclick="fullScreenChat()">
                        <img class="icon-expand" src="{{ url_for('static', filename='svgs/open_in_full.svg') }}" alt="">
                    </button>
                    <button onclick="fullScreenChatMobile()" class="mobile-only">
                        <img class="icon-expand mobile-only" src="{{ url_for('static', filename='svgs/close_fullscreen.svg') }}" alt="">
                    </button>
                </div>

                <div class="chat-message-wrapper card-slider" id="chat-zone">
                </div>

                <!-- <div class="start-chat-message-wrapper" id="startChatMessage">
                    <span>Start chatting with your documents!</span>
                    <div class="chat-messages-suggestions">
                        <button onclick="sendMessage('Give me the biggest transaction in the past 5 days', output_format_request='text')">Give me the biggest transaction in the past 5 days</last></button>
                        <button onclick="sendMessage('Give me the biggest transaction in the past 15 days', output_format_request='text')">Give me the biggest transaction in the past 15 days</button>
                        <button onclick="sendMessage('Give me the lowest transaction in the past 30 days', output_format_request='text')">Give me the lowest transaction in the past 30 days</button>
                    </div>
                </div> -->
                
                <div class="chat-footer" id="chat-footer">
                    <textarea 
                        class="chat-input-text card-slider" 
                        id="chat-input-text"
                        rows="1"
                        cols="50"
                        placeholder="Type your message here..."
                    ></textarea>
                    <button onclick="sendMessage('',output_format_request='text')">
                        <span class="material-symbols-outlined">
                            send
                            </span>
                    </button>
                </div>

            </div>
        </div>
    </div>
</body>
</html>